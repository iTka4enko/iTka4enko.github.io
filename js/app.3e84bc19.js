(function(e){function t(t){for(var o,a,s=t[0],i=t[1],u=t[2],p=0,l=[];p<s.length;p++)a=s[p],Object.prototype.hasOwnProperty.call(r,a)&&r[a]&&l.push(r[a][0]),r[a]=0;for(o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o]);d&&d(t);while(l.length)l.shift()();return c.push.apply(c,u||[]),n()}function n(){for(var e,t=0;t<c.length;t++){for(var n=c[t],o=!0,a=1;a<n.length;a++){var s=n[a];0!==r[s]&&(o=!1)}o&&(c.splice(t--,1),e=i(i.s=n[0]))}return e}var o={},a={app:0},r={app:0},c=[];function s(e){return i.p+"js/"+({chat:"chat",chats:"chats",contact:"contact","no-conection":"no-conection","not-found":"not-found"}[e]||e)+"."+{chat:"77deb23c",chats:"d97b58f5",contact:"40c10f10","no-conection":"b6cf03da","not-found":"107a28a6"}[e]+".js"}function i(t){if(o[t])return o[t].exports;var n=o[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.e=function(e){var t=[],n={chat:1,chats:1,contact:1,"no-conection":1,"not-found":1};a[e]?t.push(a[e]):0!==a[e]&&n[e]&&t.push(a[e]=new Promise((function(t,n){for(var o="css/"+({chat:"chat",chats:"chats",contact:"contact","no-conection":"no-conection","not-found":"not-found"}[e]||e)+"."+{chat:"0ba865d9",chats:"c6c5974f",contact:"9d664856","no-conection":"76510bb4","not-found":"8de28479"}[e]+".css",r=i.p+o,c=document.getElementsByTagName("link"),s=0;s<c.length;s++){var u=c[s],p=u.getAttribute("data-href")||u.getAttribute("href");if("stylesheet"===u.rel&&(p===o||p===r))return t()}var l=document.getElementsByTagName("style");for(s=0;s<l.length;s++){u=l[s],p=u.getAttribute("data-href");if(p===o||p===r)return t()}var d=document.createElement("link");d.rel="stylesheet",d.type="text/css",d.onload=t,d.onerror=function(t){var o=t&&t.target&&t.target.src||r,c=new Error("Loading CSS chunk "+e+" failed.\n("+o+")");c.code="CSS_CHUNK_LOAD_FAILED",c.request=o,delete a[e],d.parentNode.removeChild(d),n(c)},d.href=r;var m=document.getElementsByTagName("head")[0];m.appendChild(d)})).then((function(){a[e]=0})));var o=r[e];if(0!==o)if(o)t.push(o[2]);else{var c=new Promise((function(t,n){o=r[e]=[t,n]}));t.push(o[2]=c);var u,p=document.createElement("script");p.charset="utf-8",p.timeout=120,i.nc&&p.setAttribute("nonce",i.nc),p.src=s(e);var l=new Error;u=function(t){p.onerror=p.onload=null,clearTimeout(d);var n=r[e];if(0!==n){if(n){var o=t&&("load"===t.type?"missing":t.type),a=t&&t.target&&t.target.src;l.message="Loading chunk "+e+" failed.\n("+o+": "+a+")",l.name="ChunkLoadError",l.type=o,l.request=a,n[1](l)}r[e]=void 0}};var d=setTimeout((function(){u({type:"timeout",target:p})}),12e4);p.onerror=p.onload=u,document.head.appendChild(p)}return Promise.all(t)},i.m=e,i.c=o,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)i.d(n,o,function(t){return e[t]}.bind(null,o));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/",i.oe=function(e){throw console.error(e),e};var u=window["webpackJsonp"]=window["webpackJsonp"]||[],p=u.push.bind(u);u.push=t,u=u.slice();for(var l=0;l<u.length;l++)t(u[l]);var d=p;c.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"0aa3":function(e,t,n){"use strict";n("3714")},3714:function(e,t,n){},"3b46":function(e,t,n){},"569d":function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var o=n("7a23"),a={class:"app__container"};function r(e,t,n,r,c,s){var i=Object(o["w"])("AuthPopUp"),u=Object(o["w"])("Header"),p=Object(o["w"])("router-view"),l=Object(o["w"])("Footer");return Object(o["p"])(),Object(o["d"])("div",a,[c.showAuthPopUp?(Object(o["p"])(),Object(o["d"])(i,{key:0,onHide:s.hidePopUp},null,8,["onHide"])):Object(o["e"])("",!0),Object(o["g"])(u,{onShowPopUp:s.showPopUp},null,8,["onShowPopUp"]),Object(o["g"])(p),Object(o["g"])(l)])}n("7db0"),n("b0c0");var c=n("5530"),s=Object(o["H"])("data-v-6afdf4d6"),i=s((function(e,t,n,a,r,c){return Object(o["p"])(),Object(o["d"])("footer")}));n("9804");const u={};u.render=i,u.__scopeId="data-v-6afdf4d6";var p=u,l=Object(o["H"])("data-v-77198d5c");Object(o["s"])("data-v-77198d5c");var d={class:"header"},m=Object(o["g"])("div",null,null,-1),f=Object(o["g"])("span",null,"Back",-1),h={class:"header__nav"},b=Object(o["g"])("svg",{class:"header__img fas fa-home"},null,-1),g=Object(o["g"])("span",null,null,-1),O=Object(o["g"])("svg",{class:"header__img fas fa-comments"},null,-1),_=Object(o["g"])("span",null,null,-1),j={class:"header__profileLink"},v={class:"header__authUser"},w=Object(o["g"])("svg",{class:"header__img fas fa-user"},null,-1);Object(o["q"])();var P=l((function(e,t,n,a,r,c){var s=Object(o["w"])("router-link"),i=Object(o["w"])("MessageNotification");return Object(o["p"])(),Object(o["d"])("div",d,[Object(o["g"])("div",{class:["header__backButton",{"header__backButton--disabled":c.isHomePage}],onClick:t[1]||(t[1]=function(){return c.backInHistory.apply(c,arguments)})},[m,f],2),Object(o["g"])("nav",null,[Object(o["g"])("div",h,[Object(o["g"])("div",{class:["header__links",{"header__links--active":"/"==c.routePath}]},[b,Object(o["g"])(s,{to:"/"},{default:l((function(){return[g]})),_:1})],2),e.authorizedUser?(Object(o["p"])(),Object(o["d"])("div",{key:0,class:["header__links",{"header__links--active":"/chats"==c.routePath}]},[O,Object(o["g"])(s,{to:"/chats"},{default:l((function(){return[_]})),_:1}),Object(o["g"])(i,{notificationCount:c.authorizedUserObj.notifications.length,color:"red",class:"header__notificationIcon"},null,8,["notificationCount"])],2)):Object(o["e"])("",!0),Object(o["g"])("div",{onClick:t[2]||(t[2]=function(){return c.showPopUpinAPP.apply(c,arguments)}),class:"header__links"},[Object(o["E"])(Object(o["g"])("div",j,[Object(o["g"])("div",{class:"userIcon",style:"background-image: url(".concat(r.BACKEND_DOMAIN+c.authUserPhoto,")")},null,4),Object(o["g"])("span",v,Object(o["y"])(e.authorizedUser),1)],512),[[o["B"],e.authorizedUser]]),Object(o["E"])(Object(o["g"])("div",null,[w],512),[[o["B"],!e.authorizedUser]])])])])])})),U=(n("d3b7"),n("954b")),y={class:"container"},E={class:"contacts mainList"},T={key:0,class:"contacts__item mainList__elem"},N={class:"contacts__name"};function L(e,t,n,a,r,c){var s=Object(o["w"])("router-link");return Object(o["p"])(),Object(o["d"])("div",y,[Object(o["g"])("main",null,[Object(o["g"])("div",E,[(Object(o["p"])(!0),Object(o["d"])(o["a"],null,Object(o["v"])(c.contactsReversed,(function(t){return Object(o["p"])(),Object(o["d"])(o["a"],{key:t.name},[t.name!=e.authorizedUser?(Object(o["p"])(),Object(o["d"])("div",T,[Object(o["g"])(s,{to:{name:"contactView",params:{contactName:t.name}}},null,8,["to"]),Object(o["g"])("div",{class:"contacts__image userIcon",style:"background-image: url(".concat(r.BACKEND_DOMAIN+t.photo,")")},null,4),Object(o["g"])("div",N,Object(o["y"])(t.name),1),Object(o["g"])("div",{class:["status",{"status--active":t.status}]},null,2)])):Object(o["e"])("",!0)],64)})),128))])])])}var A=n("5502"),C=n("8575"),I={name:"Home",data:function(){return{BACKEND_DOMAIN:C["a"]}},computed:Object(c["a"])(Object(c["a"])({},Object(A["d"])(["contacts","authorizedUser"])),{},{contactsReversed:function(){return this.contacts.reverse()}})};I.render=L;var S=I;function R(e,t,n,a,r,c){var s=Object(o["w"])("router-view");return Object(o["p"])(),Object(o["d"])(s)}var x={name:"contact"};x.render=R;var k=x,M=[{path:"/",name:"Home",component:S},{path:"/NoConection",name:"NoConection",component:function(){return n.e("no-conection").then(n.bind(null,"f3df"))}},{path:"/404",name:"NotFound",component:function(){return n.e("not-found").then(n.bind(null,"2da5"))}},{path:"/chats",name:"Chats",component:function(){return n.e("chats").then(n.bind(null,"c98b"))}},{path:"/:contactName",name:"contact",component:k,props:!0,children:[{path:"chat",name:"Chat",component:function(){return n.e("chat").then(n.bind(null,"293a"))}},{path:"",name:"contactView",component:function(){return n.e("contact").then(n.bind(null,"ea79"))},props:!0}]}],G=Object(U["a"])({history:Object(U["b"])("/"),routes:M});G.beforeEach((function(e,t,n){e.matched.length?n():n("/404")}));var H=G,z=n("b779"),B={data:function(){return{BACKEND_DOMAIN:C["a"]}},components:{MessageNotification:z["a"]},computed:Object(c["a"])(Object(c["a"])({routePath:function(){return this.$route.path},isHomePage:function(){return"/"===this.$route.path}},Object(A["d"])(["authorizedUser","contacts","chats"])),{},{authorizedUserObj:function(){return this.$parent.getAuthObj()},authUserPhoto:function(){return this.authorizedUserObj?this.authorizedUserObj.photo:""}}),methods:Object(c["a"])(Object(c["a"])(Object(c["a"])({},Object(A["b"])(["GET_CONTACT"])),Object(A["c"])(["DELETE_AUTH"])),{},{backInHistory:function(){H.go(-1)},showPopUpinAPP:function(){this.$emit("showPopUp")},checkUserExist:function(){var e=this,t=this.contacts.find((function(t){return t.name==e.authorizedUser}));t||this.DELETE_AUTH()}}),mounted:function(){this.checkUserExist()}};n("bfe2");B.render=P,B.__scopeId="data-v-77198d5c";var D=B,F=Object(o["H"])("data-v-896c2492");Object(o["s"])("data-v-896c2492");var W={class:"popUp"},$={class:"popUp__window"},K=Object(o["g"])("div",null,null,-1),q=Object(o["g"])("div",null,null,-1),V={class:"popUp__login-logout popUp__parts"},J={key:0},Z=Object(o["g"])("h2",null,"LogIn",-1),Q=Object(o["g"])("input",{class:"popUp__submit mainButton mainButton--blue",type:"submit",value:"LogIn"},null,-1),X={key:1,class:"popUp__userProfile"},Y={class:"mainImg popUp__img"},ee={class:"popUp__username"},te=Object(o["g"])("input",{class:"mainButton mainButton--blue popUp__submit",type:"submit",value:"Send changes"},null,-1),ne=Object(o["g"])("input",{class:"popUp__submit mainButton mainButton--red",type:"submit",value:"LogOut"},null,-1),oe={key:0,class:"popUp__registration popUp__parts"},ae=Object(o["g"])("h2",null,"Registration",-1),re=Object(o["g"])("input",{class:"popUp__submit mainButton mainButton--blue",type:"submit",value:"Register"},null,-1);Object(o["q"])();var ce=F((function(e,t,n,a,r,c){var s=Object(o["w"])("FileInput");return Object(o["p"])(),Object(o["d"])("div",W,[Object(o["g"])("div",$,[Object(o["g"])("div",{onClick:t[1]||(t[1]=function(){return c.hidePopUp.apply(c,arguments)}),class:"popUp__close"},[K,q]),Object(o["g"])("div",V,[e.authorizedUser?(Object(o["p"])(),Object(o["d"])("div",X,[Object(o["g"])("form",{class:"popUp__changes",onSubmit:t[10]||(t[10]=Object(o["G"])((function(){return c.validateChanges.apply(c,arguments)}),["prevent"])),method:"POST"},[Object(o["g"])("div",Y,[Object(o["g"])("img",{src:r.BACKEND_DOMAIN+c.authorizedUserObj.photo},null,8,["src"])]),Object(o["g"])("span",ee,Object(o["y"])(e.authorizedUser),1),Object(o["g"])(s),Object(o["g"])("label",{class:["popUp__label",{"popUp__label--invalid":r.formProfile.emptyName||r.formProfile.nameExist||r.formProfile.nameLenMin||r.formProfile.nameLenMax}],for:"newUsername"},null,2),Object(o["E"])(Object(o["g"])("input",{"onUpdate:modelValue":t[8]||(t[8]=function(e){return r.formProfile.name=e}),onInput:t[9]||(t[9]=function(){r.formProfile.emptyName=!1,r.formProfile.nameLenMin=!1,r.formProfile.nameLenMax=!1,r.formProfile.nameExist=!1}),class:"mainInput popUp__input",type:"text",name:"newUsername"},null,544),[[o["A"],r.formProfile.name,void 0,{trim:!0}]]),Object(o["g"])("span",null,Object(o["y"])(r.formProfile.emptyName?"Enter a name":r.formProfile.nameLenMin?"At least 3 characters":r.formProfile.nameLenMax?"To long name":r.formProfile.nameExist?"Already exist":""),1),te],32),Object(o["g"])("form",{class:"popUp__logOut",onSubmit:t[11]||(t[11]=Object(o["G"])((function(){return c.logOut.apply(c,arguments)}),["prevent"])),method:"POST"},[ne],32)])):(Object(o["p"])(),Object(o["d"])("div",J,[Z,Object(o["g"])("form",{onSubmit:t[7]||(t[7]=Object(o["G"])((function(){return c.validatelogIn.apply(c,arguments)}),["prevent"])),action:"",method:"GET"},[Object(o["g"])("label",{class:["popUp__label",{"popUp__label--invalid":r.formLog.emptyName||r.formLog.noSuchName}],for:"name"},null,2),Object(o["E"])(Object(o["g"])("input",{"onUpdate:modelValue":t[2]||(t[2]=function(e){return r.formLog.name=e}),onInput:t[3]||(t[3]=function(){r.formLog.emptyName=!1,r.formLog.noSuchName=!1}),class:"mainInput popUp__input",type:"text",name:"name",id:"name",placeholder:"Name"},null,544),[[o["A"],r.formLog.name,void 0,{trim:!0}]]),Object(o["g"])("span",null,Object(o["y"])(r.formLog.emptyName?"Enter a name":r.formLog.noSuchName?"No such user":""),1),Object(o["g"])("label",{class:["popUp__label",{"popUp__label--invalid":r.formLog.emptyPassword||r.formLog.wrongPassword}],for:"password"},null,2),Object(o["E"])(Object(o["g"])("input",{onKeypress:t[4]||(t[4]=Object(o["F"])(Object(o["G"])((function(){}),["prevent"]),["space"])),"onUpdate:modelValue":t[5]||(t[5]=function(e){return r.formLog.password=e}),onInput:t[6]||(t[6]=function(){r.formLog.emptyPassword=!1,r.formLog.wrongPassword=!1}),class:"mainInput popUp__input",type:"password",name:"password",id:"password",placeholder:"Password"},null,544),[[o["A"],r.formLog.password,void 0,{trim:!0}]]),Object(o["g"])("span",null,Object(o["y"])(r.formLog.emptyPassword?"Enter a password":r.formLog.wrongPassword?"Wrong password":""),1),Q],32)]))]),e.authorizedUser?Object(o["e"])("",!0):(Object(o["p"])(),Object(o["d"])("div",oe,[ae,Object(o["g"])("form",{action:"",method:"POST",onsubmit:"return false;",onSubmit:t[20]||(t[20]=Object(o["G"])((function(){return c.validateRegistrationData.apply(c,arguments)}),["prevent"]))},[Object(o["g"])("label",{class:["popUp__label",{"popUp__label--invalid":r.formReg.emptyName||r.formReg.nameExist||r.formReg.nameLenMin||r.formReg.nameLenMax}],for:"regName"},null,2),Object(o["E"])(Object(o["g"])("input",{"onUpdate:modelValue":t[12]||(t[12]=function(e){return r.formReg.name=e}),onInput:t[13]||(t[13]=function(){r.formReg.emptyName=!1,r.formReg.nameExist=!1,r.formReg.nameLenMin=!1,r.formReg.nameLenMax=!1}),class:"mainInput popUp__input",type:"text",name:"name",id:"regName",placeholder:"Name"},null,544),[[o["A"],r.formReg.name,void 0,{trim:!0}]]),Object(o["g"])("span",null,Object(o["y"])(r.formReg.emptyName?"Enter a name":r.formReg.nameLenMin?"At least 3 characters":r.formReg.nameLenMax?"To long name":r.formReg.nameExist?"Already exist":""),1),Object(o["g"])("label",{class:["popUp__label",{"popUp__label--invalid":r.formReg.emptyPassword||r.formReg.passwordLen}],for:"regPassword"},null,2),Object(o["E"])(Object(o["g"])("input",{onKeypress:t[14]||(t[14]=Object(o["F"])(Object(o["G"])((function(){}),["prevent"]),["space"])),"onUpdate:modelValue":t[15]||(t[15]=function(e){return r.formReg.password=e}),onInput:t[16]||(t[16]=function(){r.formReg.emptyPassword=!1,r.formReg.passwordLen=!1}),class:"mainInput popUp__input",type:"password",name:"password",id:"regPassword",placeholder:"Password"},null,544),[[o["A"],r.formReg.password,void 0,{trim:!0}]]),Object(o["g"])("span",null,Object(o["y"])(r.formReg.emptyPassword?"Enter a password":r.formReg.passwordLen?"At least 8 characters":""),1),Object(o["g"])("label",{class:["popUp__label",{"popUp__label--invalid":r.formReg.rePasswordCheck}],for:"regRePassword"},null,2),Object(o["E"])(Object(o["g"])("input",{onKeypress:t[17]||(t[17]=Object(o["F"])(Object(o["G"])((function(){}),["prevent"]),["space"])),"onUpdate:modelValue":t[18]||(t[18]=function(e){return r.formReg.rePassword=e}),onInput:t[19]||(t[19]=function(){r.formReg.rePasswordCheck=!1}),class:"mainInput popUp__input",type:"password",name:"rePassword",id:"regRePassword",placeholder:"Password again"},null,544),[[o["A"],r.formReg.rePassword,void 0,{trim:!0}]]),Object(o["g"])("span",null,Object(o["y"])(r.formReg.rePasswordCheck?"Wrong password repeat":""),1),re],32)]))])])})),se=(n("4de4"),n("4160"),n("159b"),Object(o["H"])("data-v-8a3d5096"));Object(o["s"])("data-v-8a3d5096");var ie={class:"FileInput"},ue=Object(o["g"])("span",{class:"FileInput__text"},"No file chosen",-1);Object(o["q"])();var pe=se((function(e,t,n,a,r,c){return Object(o["p"])(),Object(o["d"])("div",ie,[Object(o["g"])("input",{onChange:t[1]||(t[1]=function(){return c.changeText.apply(c,arguments)}),class:"FileInput__input",type:"file",name:"photo",accept:"image/*"},null,32),Object(o["g"])("button",{onClick:t[2]||(t[2]=Object(o["G"])((function(){return c.chouseFile.apply(c,arguments)}),["prevent"])),class:"FileInput__button"},"Choose a file"),ue])})),le=(n("ac1f"),n("466d"),{data:function(){return{input:"",button:"",text:""}},methods:{chouseFile:function(){this.input.click()},changeText:function(){this.text.innerText=this.input.value.match(/[\/\\]([\w\d\s\.\-\(\)]+)$/)[1]}},mounted:function(){var e=this;this.$nextTick((function(){e.input=document.querySelector(".FileInput__input"),e.button=document.querySelector(".FileInput__button"),e.text=document.querySelector(".FileInput__text")}))}});n("6c60");le.render=pe,le.__scopeId="data-v-8a3d5096";var de=le,me={name:"Auth",components:{FileInput:de},data:function(){return{BACKEND_DOMAIN:C["a"],formReg:{name:"",password:"",rePassword:"",emptyPassword:!1,emptyName:!1,rePasswordCheck:!1,nameExist:!1,nameLenMin:!1,nameLenMax:!1,passwordLen:!1},formLog:{name:"",password:"",emptyPassword:!1,emptyName:!1,noSuchName:!1,wrongPassword:!1},formProfile:{name:"",emptyName:!1,nameExist:!1,nameLenMin:!1,nameLenMax:!1}}},computed:Object(c["a"])(Object(c["a"])({},Object(A["d"])(["authorizedUser","contacts"])),{},{authorizedUserObj:function(){var e=this,t=this.contacts.find((function(t){return t.name==e.authorizedUser}));return t||{notifications:[]}}}),methods:Object(c["a"])(Object(c["a"])({},Object(A["b"])(["SET_NEW_CONTACT","LOG_OUT","LOG_IN","GET_CHATS","CHANGE_PROFILE"])),{},{hidePopUp:function(e){this.$emit("hide")},getIndexByUserName:function(e){var t=null;return this.contacts.forEach((function(n,o){n.name===e&&(t=o)})),t},logIn:function(e){var t=this,n=this.formLog.name,o=this.formLog.password,a={name:n,password:o,index:e};return new Promise((function(e){t.LOG_IN(a).then((function(t){e(t)}))}))},sendRegistrationData:function(){var e=this.formReg.password,t=this.formReg.name,n={password:e,name:t};this.SET_NEW_CONTACT(n),this.formReg.name="",this.formReg.password="",this.formReg.rePassword=""},isNameAndPassEmpty:function(e,t,n){var o=!0;return null===t&&(t=!0,o=!1),""!=e&&""!=t?(n.emptyName=!1,o&&(n.emptyPassword=!1),!1):(n.emptyName=""==e,o&&(n.emptyPassword=""==t),!0)},isUserExist:function(e){var t=this.contacts.filter((function(t){return t.name==e.name}));return t.length?(e.nameExist=!0,!0):(e.nameExist=!1,!1)},namePasswordLenOk:function(e,t,n){var o=!0;return null===t&&(t="********",o=!1),e.length>=3&&t.length>=8&&e.length<=10?(o&&(n.passwordLen=!1),n.nameLenMin=!1,!0):(e.length<3?n.nameLenMin=!0:n.nameLenMin=!1,e.length>15?n.nameLenMax=!0:n.nameLenMax=!1,o&&(t.length<8?n.passwordLen=!0:n.passwordLen=!1),!1)},validateRegistrationData:function(){var e=this.formReg.name,t=this.formReg.password,n=this.formReg.rePassword;return!this.isNameAndPassEmpty(e,t,this.formReg)&&(!!this.namePasswordLenOk(e,t,this.formReg)&&(t!=n?(this.formReg.rePasswordCheck=!0,!1):(this.formReg.rePasswordCheck=!1,!this.isUserExist(this.formReg)&&(this.sendRegistrationData(),this.hidePopUp(),void this.$router.push("/")))))},validatelogIn:function(e){var t=this.formLog.name,n=this.formLog.password;if(this.isNameAndPassEmpty(t,n,this.formLog))return!1;var o=this.getIndexByUserName(t);if(null===o)return this.formLog.noSuchName=!0,!1;this.formLog.noSuchName=!1,this.logIn(o).then(function(e){""==e.data?this.formLog.wrongPassword=!0:(this.formLog.wrongPassword=!1,this.formReg.name="",this.formReg.password="",this.GET_CHATS(),this.hidePopUp(),this.$router.push("/"))}.bind(this))},validateChanges:function(e){var t=this.formProfile.name;if(t&&!this.namePasswordLenOk(t,null,this.formProfile))return!1;if(this.isUserExist(this.formProfile))return!1;var n=e.target;this.sendChanges(n),this.hidePopUp()},sendChanges:function(e){var t=new FormData(e),n=this.authorizedUser,o=this.formProfile.name;this.CHANGE_PROFILE({changes:t,oldUsername:n,newUsername:o})},logOut:function(e){var t=this.getIndexByUserName(this.authorizedUser),n={index:t};this.LOG_OUT(n),this.hidePopUp(),this.$router.push("/")}})};n("0aa3");me.render=ce,me.__scopeId="data-v-896c2492";var fe=me,he={components:{Footer:p,Header:D,AuthPopUp:fe},data:function(){return{showAuthPopUp:!1}},computed:Object(c["a"])({},Object(A["d"])(["authorizedUser","contacts"])),methods:Object(c["a"])(Object(c["a"])({},Object(A["b"])(["GET_CHATS","GET_CONTACT","CHECK_AUTORIZED","LOG_OUT"])),{},{hidePopUp:function(){this.showAuthPopUp=!1},showPopUp:function(){this.showAuthPopUp=!0},pingToServer:function(){var e=this;setInterval((function(){e.GET_CONTACT().then((function(t){t&&e.$router.push("/NoConection")})),e.authorizedUser&&e.GET_CHATS()}),2e3)},getAuthObj:function(){var e=this,t=this.contacts.find((function(t){return t.name==e.authorizedUser}));return t||{notifications:[]}}}),mounted:function(){var e=this;this.pingToServer(),this.GET_CONTACT().then((function(t){t&&e.$router.push("/NoConection")}))}};n("9cdc");he.render=r;var be=he,ge=(n("99af"),n("bc3a")),Oe=n.n(ge),_e=n("4328"),je=n.n(_e),ve=n("0e44"),we=Object(A["a"])({state:{authorizedUser:"",contacts:[],chats:[]},plugins:[Object(ve["a"])()],mutations:{CONTACT_TO_STORE:function(e,t){e.contacts=t},CHATS_TO_STORE:function(e,t){e.chats=t},SET_NEW_MESSAGE:function(e,t){var n=t.message,o=t.chatId,a=e.chats.filter((function(e){return e.id==o}))[0];a.messages.push(n)},CLEAN_NOTS:function(e,t){var n=t.authUser,o=t.chatWith;if(n){var a=e.contacts.find((function(e){return e.name==n})),r=a.notifications.filter((function(e){return e.messageFrom!=o}));a.notifications=r}},NEW_CHAT_TO_STORE:function(e,t){e.chats.unshift(t)},NEW_CONTACT_TO_STORE:function(e,t){e.contacts.push(t)},NEW_PROFILE_NAME:function(e,t){var n=t.newUsername,o=t.oldUsername;e.contacts.forEach((function(e){e.name==o&&(e.name=n)})),e.authorizedUser=n},LOG_OUT:function(e,t){var n=t.index,o=t.last_seen;e.contacts[n].last_seen=o,e.contacts[n].status=!1,e.authorizedUser=""},DELETE_AUTH:function(e){e.authorizedUser=""},LOG_IN:function(e,t){e.authorizedUser=t}},actions:{GET_CONTACT:function(e){var t=e.commit;return new Promise((function(e){Oe.a.get(C["a"]+"/APIgetContacts/").then((function(e){t("CONTACT_TO_STORE",e.data)})).catch((function(t){e(t)}))}))},GET_CHATS:function(e){var t=e.commit,n=this.state.authorizedUser;return Oe.a.get("".concat(C["a"],"/APIgetChats/").concat(n,"/")).then((function(e){t("CHATS_TO_STORE",e.data)}))},SEND_MESSAGE:function(e,t){var n=e.commit,o=t.message,a=t.chatId;return new Promise((function(e){Oe()({method:"POST",url:"".concat(C["a"],"/APIsendMessage/").concat(a,"/"),data:je.a.stringify(o)}).then((function(){n("SET_NEW_MESSAGE",{message:o,chatId:a}),e()}))}))},CLEAN_NOTS:function(e,t){var n=e.commit,o=t.authUser,a=t.chatWith;n("CLEAN_NOTS",{authUser:o,chatWith:a});var r={authUser:o,chatWith:a};Oe()({method:"POST",url:"".concat(C["a"],"/APIclearNots/"),data:je.a.stringify(r)}).then((function(e){return e}))},SET_NEW_CHAT:function(e,t){var n=e.commit;return new Promise((function(e){Oe()({method:"POST",url:"".concat(C["a"],"/APIsetNewChat/"),data:je.a.stringify(t)}).then((function(t){var o=t.data;n("NEW_CHAT_TO_STORE",o),e(o)}))}))},SET_NEW_CONTACT:function(e,t){var n=e.commit;return new Promise((function(e){Oe()({method:"POST",url:"".concat(C["a"],"/APIreg/"),data:je.a.stringify(t)}).then((function(t){var o=t.data;n("NEW_CONTACT_TO_STORE",o),e(o)}))}))},CHANGE_PROFILE:function(e,t){var n=e.commit,o=t.changes,a=t.oldUsername,r=t.newUsername;Oe()({method:"POST",url:"".concat(C["a"],"/APIchengeProfileData/").concat(a,"/"),data:o,headers:{"content-type":"multipart/form-data"}}).then((function(){r&&n("NEW_PROFILE_NAME",{newUsername:r,oldUsername:a})}))},LOG_IN:function(e,t){var n=e.commit,o=t.name;return new Promise((function(e){Oe()({method:"POST",url:"".concat(C["a"],"/APIlog/"),data:je.a.stringify(t)}).then((function(t){if(t.data)n("LOG_IN",o);else{var a="";n("LOG_IN",a)}e(t)}))}))},LOG_OUT:function(e,t){var n=e.commit,o=this.state.authorizedUser,a=t.index;Oe()({method:"POST",url:"".concat(C["a"],"/APIlogout/").concat(o,"/"),data:je.a.stringify(t)}).then((function(e){if(e.data){var t=e.data;n("LOG_OUT",{index:a,last_seen:t})}}))}},modules:{}});n("7051");Object(o["c"])(be).use(we).use(H).mount("#app")},"64cd":function(e,t,n){},"6c60":function(e,t,n){"use strict";n("64cd")},8575:function(e,t,n){"use strict";var o="https://109k4.pythonanywhere.com";t["a"]=o},9804:function(e,t,n){"use strict";n("d64c")},"9cdc":function(e,t,n){"use strict";n("3b46")},b779:function(e,t,n){"use strict";var o=n("7a23"),a=Object(o["H"])("data-v-1e6d3fe8"),r=a((function(e,t,n,a,r,c){return Object(o["p"])(),Object(o["d"])("span",{class:[[n.notificationCount?"newMessages--active":"",c.setColor()],"newMessages"]},Object(o["y"])(n.notificationCount),3)})),c=(n("a9e3"),{props:{notificationCount:Number,color:String},methods:{setColor:function(){var e=this.color;return"red"==e?"newMessages--red":"newMessages--grey"}}});n("d494");c.render=r,c.__scopeId="data-v-1e6d3fe8";t["a"]=c},bfe2:function(e,t,n){"use strict";n("569d")},d494:function(e,t,n){"use strict";n("f02e")},d64c:function(e,t,n){},f02e:function(e,t,n){}});
//# sourceMappingURL=app.3e84bc19.js.map