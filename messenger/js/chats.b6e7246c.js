(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chats"],{"0159":function(t,e,n){"use strict";n("1b28")},1276:function(t,e,n){"use strict";var s=n("d784"),i=n("44e7"),a=n("825a"),r=n("1d80"),c=n("4840"),u=n("8aa5"),o=n("50c4"),h=n("14c3"),l=n("9263"),d=n("d039"),g=[].push,f=Math.min,b=4294967295,v=!d((function(){return!RegExp(b,"y")}));s("split",2,(function(t,e,n){var s;return s="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(t,n){var s=String(r(this)),a=void 0===n?b:n>>>0;if(0===a)return[];if(void 0===t)return[s];if(!i(t))return e.call(s,t,a);var c,u,o,h=[],d=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),f=0,v=new RegExp(t.source,d+"g");while(c=l.call(v,s)){if(u=v.lastIndex,u>f&&(h.push(s.slice(f,c.index)),c.length>1&&c.index<s.length&&g.apply(h,c.slice(1)),o=c[0].length,f=u,h.length>=a))break;v.lastIndex===c.index&&v.lastIndex++}return f===s.length?!o&&v.test("")||h.push(""):h.push(s.slice(f)),h.length>a?h.slice(0,a):h}:"0".split(void 0,0).length?function(t,n){return void 0===t&&0===n?[]:e.call(this,t,n)}:e,[function(e,n){var i=r(this),a=void 0==e?void 0:e[t];return void 0!==a?a.call(e,i,n):s.call(String(i),e,n)},function(t,i){var r=n(s,t,this,i,s!==e);if(r.done)return r.value;var l=a(t),d=String(this),g=c(l,RegExp),p=l.unicode,O=(l.ignoreCase?"i":"")+(l.multiline?"m":"")+(l.unicode?"u":"")+(v?"y":"g"),j=new g(v?l:"^(?:"+l.source+")",O),m=void 0===i?b:i>>>0;if(0===m)return[];if(0===d.length)return null===h(j,d)?[d]:[];var _=0,y=0,w=[];while(y<d.length){j.lastIndex=v?y:0;var x,C=h(j,v?d:d.slice(y));if(null===C||(x=f(o(j.lastIndex+(v?0:y)),d.length))===_)y=u(d,y,p);else{if(w.push(d.slice(_,y)),w.length===m)return w;for(var L=1;L<=C.length-1;L++)if(w.push(C[L]),w.length===m)return w;y=_=x}}return w.push(d.slice(_)),w}]}),!v)},"1b28":function(t,e,n){},"44e7":function(t,e,n){var s=n("861d"),i=n("c6b6"),a=n("b622"),r=a("match");t.exports=function(t){var e;return s(t)&&(void 0!==(e=t[r])?!!e:"RegExp"==i(t))}},c98b:function(t,e,n){"use strict";n.r(e);n("7db0"),n("b0c0"),n("ac1f"),n("1276");var s=n("7a23"),i=Object(s["H"])("data-v-eafe82b6");Object(s["s"])("data-v-eafe82b6");var a={class:"container"},r={key:0,class:"chats mainList"},c={class:"chats__text"},u={class:"chats__username"},o={key:0,class:"chats__messageText"},h={class:"chats__time"},l={key:1,class:"chats__noChats"};Object(s["q"])();var d=i((function(t,e,n,i,d,g){var f=Object(s["w"])("router-link"),b=Object(s["w"])("MessageNotification");return Object(s["p"])(),Object(s["d"])("div",a,[t.chats.length?(Object(s["p"])(),Object(s["d"])("div",r,[(Object(s["p"])(!0),Object(s["d"])(s["a"],null,Object(s["v"])(t.chats,(function(e){return Object(s["p"])(),Object(s["d"])("div",{key:e.name,class:["chats__item mainList__elem",{"chats__item--active":g.getNotificationsLength(e)}]},[Object(s["g"])(f,{to:{path:"/"+e.users.find((function(e){return e!=t.authorizedUser}))+"/chat"}},null,8,["to"]),Object(s["g"])("div",{class:"userIcon",style:"background-image: url(".concat(d.BACKEND_DOMAIN+g.userObj(e).photo,")")},null,4),Object(s["g"])("div",c,[Object(s["g"])("div",u,Object(s["y"])(g.userObj(e).name),1),e.messages.length?(Object(s["p"])(),Object(s["d"])("div",o,Object(s["y"])(g.getLastMessage(e)),1)):Object(s["e"])("",!0)]),Object(s["g"])("div",h,Object(s["y"])(g.getLastTime(e).split(",")[3]),1),Object(s["g"])(b,{notificationCount:g.getNotificationsLength(e),color:"grey",class:"chats__newMessagesCount"},null,8,["notificationCount"])],2)})),128))])):(Object(s["p"])(),Object(s["d"])("div",l,"No chats found"))])})),g=(n("4de4"),n("5530")),f=n("5502"),b=n("8575"),v=n("b779"),p={name:"Chats",data:function(){return{BACKEND_DOMAIN:b["a"]}},components:{MessageNotification:v["a"]},computed:Object(g["a"])(Object(g["a"])({},Object(f["d"])(["contacts","chats","authorizedUser"])),{},{authorizedUserObj:function(){return this.$parent.$parent.getAuthObj()}}),watch:{authorizedUser:function(t){t||this.$router.push("/")},chats:function(){this.sortChatsByActivity()}},methods:{userObj:function(t){var e=this,n=t.users.find((function(t){return t!=e.authorizedUser})),s=this.contacts.find((function(t){return t.name==n}));return s},sortChatsByActivity:function(){var t=this;this.chats.sort((function(e,n){var s=t.getLastTime(e),i=t.getLastTime(n),a=new Date(s),r=new Date(i);return a>r?-1:a==r?0:a<r?1:void 0}))},getLastTime:function(t){if(t.messages.length){var e=t.messages[t.messages.length-1].timeOfSend;return e}var n=t.timeOfCreate;return n},getLastMessage:function(t){var e=t.messages[t.messages.length-1].text;return e.length>30&&(e=e.substr(0,30)+" . . ."),e},getNotificationsLength:function(t){var e=this;if(this.authorizedUserObj){var n=this.authorizedUserObj.notifications.filter((function(n){return n.messageFrom==t.users.find((function(t){return t!=e.authorizedUser}))})).length;return n}return!1}},mounted:function(){this.authorizedUser?this.sortChatsByActivity():this.$router.push("/404")}};n("0159");p.render=d,p.__scopeId="data-v-eafe82b6";e["default"]=p}}]);
//# sourceMappingURL=chats.b6e7246c.js.map